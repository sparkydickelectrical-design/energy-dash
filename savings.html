<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    <title>Savings | PeakShaving Hub</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css?v=4.3">
</head>
<body>
    <nav class="main-nav">
        <div class="nav-top">
            <div class="brand-logo">PeakShaving <span>Energy Hub</span></div>
            <div class="nav-links">
                <a href="index.html" class="nav-item">Home</a>
                <a href="savings.html" class="nav-item active">Savings</a>
            </div>
        </div>
    </nav>

    <div class="scroll-content">
        <section class="savings-hero-card">
            <div class="hero-label">Total Estimated Savings</div>
            <div class="hero-value">£142.50</div>
            <div id="dst-status" class="hero-subtext">Calculating GMT Shift...</div>
        </section>

        <div class="stats-mini-grid">
            <div class="mini-box border-green">
                <i data-lucide="trending-down" class="green-text"></i>
                <div class="mini-info">
                    <strong>£84.20</strong>
                    <span>Avoided Peak Costs</span>
                </div>
            </div>
            <div class="mini-box border-blue">
                <i data-lucide="leaf" class="blue-text"></i>
                <div class="mini-info">
                    <strong>12.4 <small>kg</small></strong>
                    <span>CO2 Offset</span>
                </div>
            </div>
        </div>

        <div class="daily-header"><h2>Economy 7 Breakdown</h2></div>

        <div class="financial-section">
            <div class="tariff-card">
                <div class="tariff-header">
                    <i data-lucide="clock" class="blue-text"></i>
                    <span id="tariff-label">Economy 7 Schedule</span>
                </div>
                <div class="tariff-split">
                    <div class="rate-box">
                        <div class="rate-label"><i data-lucide="sun"></i> Day Rate</div>
                        <div class="rate-price">28.5<small>p</small></div>
                        <div id="peak-time" class="rate-period">Loading...</div>
                    </div>
                    <div class="rate-box active-glow">
                        <div class="rate-label"><i data-lucide="moon"></i> Night Rate</div>
                        <div class="rate-price green-text">7.5<small>p</small></div>
                        <div id="night-time" class="rate-period">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="daily-card">
                <div class="daily-top">
                    <div class="card-icons"><i data-lucide="zap" class="orange-text"></i></div>
                    <div class="card-title">Grid Independence</div>
                    <div class="stat-ring">88%</div>
                </div>
                <div class="card-details">
                    <p class="card-description">
                        Energy used during Peak hours supplied by solar or battery.
                    </p>
                </div>
            </div>
        </div>

        <div class="daily-header"><h2>Monthly Projection</h2></div>
        <div class="daily-card" style="margin-bottom: 40px;">
            <div class="card-details">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: #94a3b8;">Est. Current Bill</span>
                    <strong class="green-text">£42.10</strong>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: #94a3b8;">Standard (No Storage)</span>
                    <strong style="color: #ef4444;">£118.40</strong>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Icons
        lucide.createIcons();

        /**
         * GMT-Shifted Logic for Economy 7:
         * Winter (GMT): 01:00 - 08:00 Night | 08:00 - 01:00 Day
         * Summer (BST): 02:00 - 09:00 Night | 09:00 - 02:00 Day
         */
        function updateEconomy7Windows() {
            const now = new Date();
            
            // In the UK: 0 during GMT (Winter), -60 during BST (Summer).
            const isBST = now.getTimezoneOffset() < 0;
            const zone = isBST ? "BST" : "GMT";

            // Define Time Strings based on Zone
            const nightStart = isBST ? "02:00" : "01:00";
            const nightEnd = isBST ? "09:00" : "08:00";
            
            const dayStart = isBST ? "09:00" : "08:00";
            const dayEnd = isBST ? "02:00" : "01:00";

            // Update UI Elements
            document.getElementById('night-time').innerText = `${nightStart} — ${nightEnd}`;
            document.getElementById('peak-time').innerText = `${dayStart} — ${dayEnd}`;
            
            document.getElementById('dst-status').innerText = `Meter tracking ${zone} Shift (01:00 GMT Base)`;
            document.getElementById('tariff-label').innerText = `${zone} Economy 7 Schedule`;
        }

        // Execute function immediately
        updateEconomy7Windows();
    </script>
</body>
</html>
