<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Hub | PeakShaving Pro</title>
    <style>
        :root{--b:#000;--c:#0a0a0a;--blue:#3b82f6;--green:#4ade80;--red:#ef4444;--gold:#f59e0b;--tx:#fff;--tx-m:#64748b;--bd:#1a1a1a;--sh:0 10px 25px rgba(0,0,0,.9);--rd:16px;--rl:24px}
        body{background:var(--b);color:var(--tx);font-family:-apple-system,sans-serif;margin:0;padding:20px;overflow-x:hidden}
        
        /* HEADER & WEATHER */
        .main-nav{max-width:1200px;margin:0 auto 20px}
        .nav-top{display:flex;justify-content:space-between;align-items:center;padding-bottom:15px}
        .brand-logo{font-weight:900;text-transform:uppercase;font-size:1.1rem}.brand-logo span{color:var(--green)}
        .nav-links a{color:var(--tx-m);text-decoration:none;font-weight:700;font-size:.75rem;margin-left:15px}
        
        .weather-bar{background:var(--c);border:1px solid var(--bd);padding:12px 18px;border-radius:12px;display:flex;align-items:center;font-size:0.75rem;color:var(--tx-m);gap:20px;margin-bottom:25px}
        .tel-item{display:flex;align-items:center;gap:6px}.tel-item svg{width:14px;height:14px}

        /* TOP DATA BOXES */
        .data-header{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;max-width:1200px;margin:0 auto 40px}
        .data-box{background:var(--c);border:1px solid var(--bd);padding:20px;border-radius:var(--rd)}
        .box-label{font-size:.6rem;font-weight:800;color:var(--tx-m);text-transform:uppercase;margin-bottom:6px;display:block}
        .box-value{font-size:1.8rem;font-weight:900}.box-unit{font-size:.8rem;color:var(--tx-m);margin-left:4px}

        /* RADIAL HUB */
        .radial-container{position:relative;width:400px;height:400px;margin:40px auto 60px}
        .connections-layer{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;opacity:.15}
        .dash-line{stroke:#fff;stroke-width:2;stroke-dasharray:5}
        .node-wrapper{position:absolute;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;z-index:10;width:100px}
        .node{width:86px;height:86px;background:var(--b);border:3px solid var(--bd);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1px;margin-bottom:8px;box-shadow:var(--sh)}
        .node svg{width:18px;height:18px;stroke-width:2.5}
        .node .v{font-size:1.1rem;font-weight:900;line-height:1}
        .node .u{font-size:0.55rem;font-weight:800;color:var(--tx-m);text-transform:uppercase}
        .external-label{font-size:.6rem;font-weight:800;color:var(--tx-m);text-transform:uppercase;letter-spacing:1px;text-align:center}
        
        .center-pos{top:50%;left:50%}.solar-pos{top:10%;left:50%}.wind-pos{top:25%;left:85%}.battery-pos{top:55%;left:90%}.home-pos{top:85%;left:70%}.charger-pos{top:85%;left:30%}.heatpump-pos{top:55%;left:10%}.grid-pos{top:25%;left:15%}

        /* BATTERY GRAPHIC */
        .scroll-content{max-width:1200px;margin:0 auto 100px}
        .battery-viz-card{background:var(--c);border:1px solid var(--bd);padding:30px;border-radius:var(--rl);display:flex;align-items:center;gap:40px}
        .battery-circle-wrap{position:relative;width:120px;height:120px;flex-shrink:0}
        .ring-fill{fill:none;stroke:var(--green);stroke-width:10;stroke-dasharray:377;stroke-dashoffset:30;stroke-linecap:round;transform:rotate(-90deg);transform-origin:center;filter:drop-shadow(0 0 5px var(--green))}
        .ring-bg{fill:none;stroke:#111;stroke-width:10}
        .perc-overlay{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}
        .perc-val{font-size:1.8rem;font-weight:900;display:block;line-height:1}

        .gold-text{color:var(--gold)}.blue-text{color:var(--blue)}.green-text{color:var(--green)}.red-text{color:var(--red)}
    </style>
</head>
<body>

    <nav class="main-nav">
        <div class="nav-top">
            <div class="brand-logo">PeakShaving <span>Professional</span></div>
            <div class="nav-links">
                <a href="savings.html">SAVINGS</a>
                <a href="analytics.html">ANALYTICS</a>
            </div>
        </div>
        <div class="weather-bar">
            <div class="tel-item"><i data-lucide="map-pin"></i> <span id="loc">Bangor, UK</span></div>
            <div class="tel-item"><i data-lucide="thermometer"></i> <span id="temp">8°C</span></div>
            <div class="tel-item"><i data-lucide="wind"></i> <span id="wind">14 mph NW</span></div>
        </div>
    </nav>

    <header class="data-header">
        <div class="data-box">
            <span class="box-label">Grid Import</span>
            <div class="box-value">0.85<span class="box-unit">kW</span></div>
        </div>
        <div class="data-box">
            <span class="box-label">Solar Yield</span>
            <div class="box-value green-text">3.10<span class="box-unit">kW</span></div>
        </div>
    </header>

    <section class="radial-container">
        <svg class="connections-layer" viewBox="0 0 400 400">
            <line x1="200" y1="200" x2="200" y2="50" class="dash-line" />
            <line x1="200" y1="200" x2="330" y2="100" class="dash-line" />
            <line x1="200" y1="200" x2="350" y2="220" class="dash-line" />
            <line x1="200" y1="200" x2="280" y2="340" class="dash-line" />
            <line x1="200" y1="200" x2="120" y2="340" class="dash-line" />
            <line x1="200" y1="200" x2="50" y2="220" class="dash-line" />
            <line x1="200" y1="200" x2="70" y2="100" class="dash-line" />
        </svg>

        <div class="node-wrapper center-pos">
            <div class="node" style="width:95px; height:95px; border-color:#333"><i data-lucide="zap" class="blue-text"></i></div>
            <span class="external-label">Master Hub</span>
        </div>

        <div class="node-wrapper solar-pos">
            <div class="node"><i data-lucide="sun" class="gold-text"></i><span class="v">2.4</span><span class="u">kW</span></div>
            <span class="external-label">Solar PV</span>
        </div>

        <div class="node-wrapper wind-pos">
            <div class="node"><i data-lucide="wind" class="blue-text"></i><span class="v">0.7</span><span class="u">kW</span></div>
            <span class="external-label">Wind Gen</span>
        </div>

        <div class="node-wrapper battery-pos">
            <div class="node"><i data-lucide="battery-charging" class="green-text"></i><span class="v">92</span><span class="u">% SOC</span></div>
            <span class="external-label">Storage</span>
        </div>

        <div class="node-wrapper home-pos">
            <div class="node" style="border-color:var(--blue)!important"><i data-lucide="home" class="blue-text"></i><span class="v">1.1</span><span class="u">kW</span></div>
            <span class="external-label">Home Load</span>
        </div>

        <div class="node-wrapper charger-pos">
            <div class="node" style="border-color:var(--green)!important"><i data-lucide="car" class="green-text"></i><span class="v">0.0</span><span class="u">kW</span></div>
            <span class="external-label">EV Charger</span>
        </div>

        <div class="node-wrapper heatpump-pos">
            <div class="node"><i data-lucide="thermometer-snowflake" class="blue-text"></i><span class="v">0.6</span><span class="u">kW</span></div>
            <span class="external-label">Heat Pump</span>
        </div>

        <div class="node-wrapper grid-pos">
            <div class="node" style="border-color:var(--red)!important"><i data-lucide="landmark" class="red-text"></i><span class="v">0.8</span><span class="u">kW</span></div>
            <span class="external-label">Utility Grid</span>
        </div>
    </section>

    <main class="scroll-content">
        <h2 style="font-size:1rem; text-transform:uppercase; color:var(--tx-m); margin-bottom:20px;">Energy Storage</h2>
        <div class="battery-viz-card">
            <div class="battery-circle-wrap">
                <svg width="120" height="120"><circle class="ring-bg" cx="60" cy="60" r="54"></circle><circle class="ring-fill" cx="60" cy="60" r="54"></circle></svg>
                <div class="perc-overlay"><span class="perc-val">92</span><span style="font-size:.6rem; font-weight:800; color:var(--tx-m)">% SOC</span></div>
            </div>
            <div>
                <div style="font-size:2rem; font-weight:900;">13.8 <small style="font-size:1rem; color:var(--tx-m)">kWh</small></div>
                <div style="color:var(--tx-m); font-size:.8rem; font-weight:700; text-transform:uppercase;">Current Capacity</div>
                <div style="display:inline-block; padding:4px 10px; background:rgba(74,222,128,0.1); color:var(--green); border-radius:20px; font-size:0.6rem; font-weight:900; margin-top:10px;">BMS: NOMINAL</div>
            </div>
        </div>
    </main>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        // LIVE WEATHER ENGINE
        async function updateWeather() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (pos) => {
                    const { latitude, longitude } = pos.coords;
                    // Note: In a real app, use your OpenWeatherAPI Key here
                    // This mock updates the UI to show the system is active
                    document.getElementById('loc').innerText = "Bangor, UK (Active)";
                    document.getElementById('temp').innerText = "9°C";
                    document.getElementById('wind').innerText = "12 mph W";
                });
            }
        }

        window.addEventListener('DOMContentLoaded', () => { 
            lucide.createIcons();
            updateWeather();
        });
    </script>
</body>
</html>
